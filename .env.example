# =============================================
# Converge-NPS Backend Environment Variables
# =============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# =============================================
# Database Configuration
# =============================================
# For local development, use local PostgreSQL
# For Railway/production, use Supabase connection string
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/converge_nps?schema=public"

# Connection pooling (Supabase provides pooled connections)
# Use ?pgbouncer=true for production with Supabase
# DATABASE_URL="postgresql://postgres:[PASSWORD]@db.supabase.co:6543/postgres?pgbouncer=true"

# =============================================
# Redis Configuration
# =============================================
# For local development, use local Redis
# For Railway/production, use Railway Redis URL
REDIS_URL="redis://localhost:6379"

# =============================================
# JWT & Authentication
# =============================================
# IMPORTANT: Generate strong random secrets for production!
# Use: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_REFRESH_SECRET="your-super-secret-refresh-key-change-this-in-production"
JWT_EXPIRES_IN="8h"
JWT_REFRESH_EXPIRES_IN="30d"

# Password hashing cost (10-12 recommended, higher = more secure but slower)
BCRYPT_ROUNDS=12

# =============================================
# Server Configuration
# =============================================
PORT=3000
NODE_ENV=development  # development | staging | production

# Frontend URL (for CORS and email links)
FRONTEND_URL="http://localhost:5173"

# API Base URL (for generating links in emails)
API_BASE_URL="http://localhost:3000"

# =============================================
# CORS Configuration
# =============================================
# Comma-separated list of allowed origins
CORS_ORIGIN="http://localhost:5173,http://localhost:3000"

# =============================================
# Email Configuration
# =============================================
EMAIL_FROM="noreply@converge-nps.com"
EMAIL_FROM_NAME="Converge NPS"
EMAIL_PROVIDER="resend"  # console | resend | sendgrid | ses

# Resend Configuration (recommended)
RESEND_API_KEY=""

# SendGrid Configuration (alternative)
SENDGRID_API_KEY=""

# AWS SES Configuration (alternative to SendGrid)
AWS_SES_REGION="us-west-2"
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""

# Email Templates
EMAIL_VERIFY_URL_TEMPLATE="${FRONTEND_URL}/verify-email?token={{token}}"
EMAIL_RESET_URL_TEMPLATE="${FRONTEND_URL}/reset-password?token={{token}}"

# =============================================
# Smartsheet Integration
# =============================================
# Get your API token from: https://app.smartsheet.com/profile
SMARTSHEET_API_KEY=""
SMARTSHEET_BASE_URL = "https://api.smartsheet.com/sheets/{SHEET_ID}"

# Sheet IDs for data import (from Smartsheet URLs)
# Format: Get the sheet ID from the URL: https://app.smartsheet.com/sheets/{SHEET_ID}
SMARTSHEET_SESSIONS_SHEET_ID=""
SMARTSHEET_PROJECTS_SHEET_ID=""
SMARTSHEET_PARTNERS_SHEET_ID=""

# Sheet IDs for data export
SMARTSHEET_ATTENDEES_SHEET_ID=""

# Sync interval (minutes) - 0 to disable auto-sync
SMARTSHEET_SYNC_INTERVAL=60

# =============================================
# File Upload & Storage (S3 or compatible)
# =============================================
S3_BUCKET="converge-nps-uploads"
S3_REGION="us-west-2"
S3_ENDPOINT=""  # Optional: For S3-compatible services (MinIO, DigitalOcean Spaces)
S3_ACCESS_KEY_ID=""
S3_SECRET_ACCESS_KEY=""

# Upload limits
MAX_FILE_SIZE_MB=5
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/webp,application/pdf"

# =============================================
# Session Management
# =============================================
SESSION_TIMEOUT_MINUTES=30
SESSION_ABSOLUTE_TIMEOUT_HOURS=12
MAX_CONCURRENT_SESSIONS=5

# =============================================
# Rate Limiting
# =============================================
# Global rate limit (per IP)
RATE_LIMIT_WINDOW_MS=3600000  # 1 hour in milliseconds
RATE_LIMIT_MAX_REQUESTS=1000

# Login rate limit (per IP + email)
LOGIN_RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
LOGIN_RATE_LIMIT_MAX_ATTEMPTS=5

# =============================================
# Monitoring & Observability
# =============================================
# Sentry for error tracking
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"  # development | staging | production
SENTRY_TRACES_SAMPLE_RATE=1.0  # 0.0 to 1.0 (1.0 = 100% of transactions)

# Logging configuration
LOG_LEVEL="info"  # error | warn | info | debug
LOG_FORMAT="json"  # json | pretty

# =============================================
# Security
# =============================================
# CSRF Protection
CSRF_ENABLED=true

# Encryption key for sensitive data (optional, for pgcrypto)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=""

# =============================================
# Feature Flags
# =============================================
ENABLE_SMARTSHEET_SYNC=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_WEBSOCKET=true
ENABLE_QR_SCANNER=true
ENABLE_OFFLINE_MODE=true

# =============================================
# Development & Testing
# =============================================
# Disable auth for testing (NEVER use in production!)
DISABLE_AUTH=false

# Seed database on startup
AUTO_SEED_DATABASE=false

# Mock external services
MOCK_SMARTSHEET=false
MOCK_EMAIL=true
MOCK_S3=false

#frontend 
# CNAME VALUE 
# qneeo6z9.up.railway.app

#Backend 
# CNAME value 
# ru7pjc67.up.railway.app

___________________________

# =============================================
# Converge-NPS Frontend Environment Variables
# =============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# NOTE: All Vite env vars must start with VITE_ prefix

# =============================================
# API Configuration
# =============================================
# Backend API base URL
VITE_API_BASE_URL=http://localhost:3000/v1

# For production, use:
# VITE_API_BASE_URL=https://api.converge-nps.com/v1

# =============================================
# WebSocket Configuration
# =============================================
# WebSocket URL for real-time messaging
VITE_WS_URL=ws://localhost:3000

# For production, use:
# VITE_WS_URL=wss://api.converge-nps.com

# =============================================
# PWA Configuration
# =============================================
# VAPID public key for push notifications
# Generate with: npx web-push generate-vapid-keys
VITE_VAPID_PUBLIC_KEY=your-vapid-public-key

# Service Worker cache version (increment to force cache refresh)
VITE_CACHE_VERSION=v1

# =============================================
# Environment
# =============================================
# Environment name
VITE_ENV=development  # development | staging | production

# App version (from package.json)

# =============================================
# Feature Flags
# =============================================
# Enable/disable features for testing
VITE_ENABLE_QR_SCANNER=true
VITE_ENABLE_OFFLINE_MODE=true
VITE_ENABLE_WEBSOCKET=true
VITE_ENABLE_PWA_INSTALL=true
VITE_ENABLE_ANALYTICS=false

# =============================================
# Monitoring & Analytics
# =============================================
# Sentry DSN for error tracking
VITE_SENTRY_DSN=

# Sentry environment
VITE_SENTRY_ENVIRONMENT=development  # development | staging | production

# Sentry traces sample rate (0.0 to 1.0)
VITE_SENTRY_TRACES_SAMPLE_RATE=0.1

# Google Analytics ID (optional)
VITE_GA_TRACKING_ID=

# =============================================
# Offline Configuration
# =============================================
# Maximum offline queue size
VITE_OFFLINE_QUEUE_MAX_SIZE=100

# Offline sync interval (milliseconds)
VITE_OFFLINE_SYNC_INTERVAL=30000  # 30 seconds

# =============================================
# UI Configuration
# =============================================
# Default theme
VITE_DEFAULT_THEME=light  # light | dark | system

# Toast notification duration (milliseconds)
VITE_TOAST_DURATION=5000

# Session timeout warning (minutes before timeout)
VITE_SESSION_WARNING_MINUTES=2

# =============================================
# Development & Debug
# =============================================
# Enable debug mode (shows extra console logs)
VITE_DEBUG=false

# Mock API responses (for development without backend)
VITE_MOCK_API=false

# API request delay (milliseconds, for testing loading states)
VITE_API_DELAY=0
